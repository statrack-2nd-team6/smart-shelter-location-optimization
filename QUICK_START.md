# 🚀 스마트 쉼터 입지 선정 - 빠른 실행 가이드

## 1️⃣ 라이브러리 설치 (필수)

```bash
# Streamlit 및 시각화 라이브러리 설치
pip install streamlit folium streamlit-folium plotly

# 머신러닝 라이브러리 (이미 설치되어 있을 수 있음)
pip install scikit-learn pandas numpy scipy
```

## 2️⃣ 파일 확인

다음 파일들이 같은 디렉토리에 있어야 합니다:

### 필수 파일 ✅
- ✅ `streamlit_app.py` - 웹 애플리케이션
- ✅ `best_model.pkl` - 학습된 모델
- ✅ `scaler.pkl` - Feature 정규화 스케일러
- ✅ `model_metadata.json` - 모델 메타데이터
- ✅ `seoul_data.json` - 서울시 정류장 데이터

### 선택 파일 (참고용)
- `README.md` - 전체 프로젝트 문서
- `EDA_Report_Final.md` - EDA 보고서
- `train_ml_models.py` - 모델 학습 스크립트
- `dataset_engineered.csv` - 데이터셋

## 3️⃣ 웹 데모 실행

```bash
# 터미널에서 실행
streamlit run streamlit_app.py
```

브라우저가 자동으로 열리며 `http://localhost:8501` 접속됩니다.

## 4️⃣ 사용 방법

### Tab 1: 타 지역 데이터 입력 & 예측 📍

**Step 1**: 대기측정소 정보 입력
- 측정소 개수 선택 (1~20개)
- 각 측정소의 위치 (위도, 경도) 입력
- 대기오염 농도 입력 (PM2.5, PM10, CAI)

**Step 2**: 버스정류장 정보 입력
- 정류장 개수 선택 (1~50개)
- 각 정류장의 위치 (위도, 경도) 입력
- 승차 인원 입력
- 배차 간격 입력

**Step 3**: 예측 실행
- "🔮 우선순위 예측하기" 버튼 클릭
- IDW로 정류장별 대기오염도 자동 계산
- 우선순위 점수 및 등급 확인
- 시각화 차트 확인

### Tab 2: 서울시 지도 시각화 🗺️

**기능**:
- 서울시 10,694개 정류장 지도 표시
- 우선순위 기준 색상 코딩
  - 🔴 빨강: 최우선
  - 🟠 주황: 우선
  - 🔵 파랑: 일반
  - 🟢 초록: 저우선

**사용법**:
1. 슬라이더로 표시할 정류장 수 조절 (10~500개)
2. "전체 정류장 표시" 체크박스 (느릴 수 있음)
3. 지도에서 마커 클릭 → 상세 정보 확인

### Tab 3: 대시보드 & 분석 📊

**제공 정보**:
- 전체 통계 (총 정류장, 평균 우선순위, 최우선 대상 등)
- 자치구별 분석 (평균 우선순위, 정류장 수)
- 분포 차트 (우선순위, CAI)
- 상관관계 분석 (CAI vs 승객수)

## 5️⃣ 예시 데이터

### 예시 1: 대전시 데이터

**대기측정소 3개**:
| 이름 | 위도 | 경도 | PM2.5 | PM10 | CAI |
|------|------|------|-------|------|-----|
| 중구측정소 | 36.3255 | 127.4210 | 19 | 33 | 59 |
| 서구측정소 | 36.3500 | 127.3850 | 18 | 32 | 58 |
| 유성측정소 | 36.3622 | 127.3563 | 17 | 30 | 56 |

**버스정류장 5개**:
| 이름 | 위도 | 경도 | 승객 | 배차 |
|------|------|------|------|------|
| 대전역 | 36.3315 | 127.4346 | 200만 | 10분 |
| 유성온천 | 36.3582 | 127.3447 | 150만 | 12분 |
| 정부청사 | 36.3775 | 127.3835 | 180만 | 11분 |
| 둔산동 | 36.3527 | 127.3787 | 120만 | 13분 |
| 서대전역 | 36.3222 | 127.3797 | 100만 | 14분 |

### 예시 2: 부산시 데이터

**대기측정소 3개**:
| 이름 | 위도 | 경도 | PM2.5 | PM10 | CAI |
|------|------|------|-------|------|-----|
| 부산진구 | 35.1631 | 129.0530 | 20 | 35 | 60 |
| 해운대구 | 35.1631 | 129.1633 | 18 | 32 | 58 |
| 사하구 | 35.1040 | 128.9740 | 22 | 38 | 62 |

**버스정류장 5개**:
| 이름 | 위도 | 경도 | 승객 | 배차 |
|------|------|------|------|------|
| 서면역 | 35.1580 | 129.0595 | 250만 | 9분 |
| 해운대역 | 35.1631 | 129.1633 | 200만 | 10분 |
| 부산역 | 35.1155 | 129.0421 | 220만 | 10분 |
| 사상역 | 35.1499 | 128.9918 | 180만 | 11분 |
| 남포동 | 35.0977 | 129.0281 | 150만 | 12분 |

## 6️⃣ 결과 해석

### 우선순위 점수 의미
- **0.7 이상**: 최우선 설치 필요 (상위 3%)
- **0.5 ~ 0.7**: 우선 설치 권장 (상위 3~10%)
- **0.3 ~ 0.5**: 일반 검토 (중간 10~50%)
- **0.3 미만**: 저우선 (하위 50%)

### 등급 기준
- 🔴 **최우선**: 점수 ≥ 0.6
- 🟠 **우선**: 점수 ≥ 0.4
- 🟡 **일반**: 점수 ≥ 0.2
- 🟢 **저우선**: 점수 < 0.2

## 7️⃣ 문제 해결 (Troubleshooting)

### 문제 1: streamlit 명령어를 찾을 수 없음
```bash
# 해결: pip로 설치
pip install streamlit

# 또는 Python 모듈로 실행
python -m streamlit run streamlit_app.py
```

### 문제 2: 모델 파일을 찾을 수 없음
```
FileNotFoundError: [Errno 2] No such file or directory: 'best_model.pkl'
```

**해결**: 
1. `train_ml_models.py`를 먼저 실행하여 모델 학습
2. 모든 파일이 같은 디렉토리에 있는지 확인

### 문제 3: 지도가 표시되지 않음
**해결**: 
- 인터넷 연결 확인 (지도 타일 로드 필요)
- 방화벽 확인

### 문제 4: 예측 결과가 이상함
**원인**: IDW 계산 시 측정소와 정류장 거리가 너무 먼 경우

**해결**:
- 측정소를 정류장 근처에 배치
- 측정소 개수 증가 (3개 이상 권장)

## 8️⃣ 추가 자료

### 상세 문서
- `README.md`: 전체 프로젝트 문서
- `EDA_Report_Final.md`: 데이터 분석 보고서

### 모델 재학습
```bash
# 데이터가 업데이트된 경우
python train_ml_models.py
```

### 성능 측정
```python
# Python 콘솔에서
import pickle
import json

# 모델 로드
with open('model_metadata.json', 'r') as f:
    metadata = json.load(f)

# 성능 확인
print(metadata['results'])
```

## 9️⃣ 연락처

문제가 발생하거나 질문이 있으면:
1. `README.md` 참고
2. GitHub Issues 등록
3. 프로젝트 담당자에게 문의

---

**즐거운 분석 되세요!** 🎉
